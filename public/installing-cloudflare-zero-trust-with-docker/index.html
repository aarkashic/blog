<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Installing Cloudflare Zero Trust With Docker | subzero</title>
<meta name=keywords content="Ubuntu"><meta name=description content="Introduction: Cloudflare Zero Trust Tunnel is a secure solution that enables you to connect your private infrastructure to Cloudflare&rsquo;s network without exposing it to the public internet. This manual will guide you through the installation process of Cloudflare Zero Trust Tunnel using Docker with host network mode and a Cloudflare Token for authentication.
Step 1: Log in to Cloudflare and Create a Tunnel Configuration
Open a web browser and navigate to the Cloudflare website."><meta name=author content="subzero"><link rel=canonical href=http://localhost:1313/installing-cloudflare-zero-trust-with-docker/><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/installing-cloudflare-zero-trust-with-docker/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Installing Cloudflare Zero Trust With Docker"><meta property="og:description" content="Introduction: Cloudflare Zero Trust Tunnel is a secure solution that enables you to connect your private infrastructure to Cloudflare&rsquo;s network without exposing it to the public internet. This manual will guide you through the installation process of Cloudflare Zero Trust Tunnel using Docker with host network mode and a Cloudflare Token for authentication.
Step 1: Log in to Cloudflare and Create a Tunnel Configuration
Open a web browser and navigate to the Cloudflare website."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/installing-cloudflare-zero-trust-with-docker/"><meta property="og:image" content="http://localhost:1313/logo_outlined_6.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-23T09:42:15-07:00"><meta property="article:modified_time" content="2023-05-23T09:42:15-07:00"><meta property="og:site_name" content="subzero"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/logo_outlined_6.png"><meta name=twitter:title content="Installing Cloudflare Zero Trust With Docker"><meta name=twitter:description content="Introduction: Cloudflare Zero Trust Tunnel is a secure solution that enables you to connect your private infrastructure to Cloudflare&rsquo;s network without exposing it to the public internet. This manual will guide you through the installation process of Cloudflare Zero Trust Tunnel using Docker with host network mode and a Cloudflare Token for authentication.
Step 1: Log in to Cloudflare and Create a Tunnel Configuration
Open a web browser and navigate to the Cloudflare website."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Installing Cloudflare Zero Trust With Docker","item":"http://localhost:1313/installing-cloudflare-zero-trust-with-docker/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Installing Cloudflare Zero Trust With Docker","name":"Installing Cloudflare Zero Trust With Docker","description":"Introduction: Cloudflare Zero Trust Tunnel is a secure solution that enables you to connect your private infrastructure to Cloudflare\u0026rsquo;s network without exposing it to the public internet. This manual will guide you through the installation process of Cloudflare Zero Trust Tunnel using Docker with host network mode and a Cloudflare Token for authentication.\nStep 1: Log in to Cloudflare and Create a Tunnel Configuration\nOpen a web browser and navigate to the Cloudflare website.","keywords":["Ubuntu"],"articleBody":"Introduction: Cloudflare Zero Trust Tunnel is a secure solution that enables you to connect your private infrastructure to Cloudflare’s network without exposing it to the public internet. This manual will guide you through the installation process of Cloudflare Zero Trust Tunnel using Docker with host network mode and a Cloudflare Token for authentication.\nStep 1: Log in to Cloudflare and Create a Tunnel Configuration\nOpen a web browser and navigate to the Cloudflare website. Log in to your Cloudflare account. Go to the “Zero Trust” section in the Cloudflare dashboard. Click on “Tunnels” and then “Create Tunnel Configuration.” Provide a name for your configuration, select the data centers you want to use, and configure other settings as per your requirements. Save the configuration. Step 2: Start the Tunnel Container with Docker\nOpen a terminal or command prompt. Run the following command to start the Cloudflare Zero Trust Tunnel container using host network mode and the Cloudflare Token: sudo docker run -d --name cloudflare --restart unless-stopped --network host cloudflare/cloudflared:latest tunnel --no-autoupdate run --token Replace with the Cloudflare Token you generated in Step 1. Example:\nsudo docker run -d --name cloudflare --restart unless-stopped --network host cloudflare/cloudflared:latest tunnel --no-autoupdate run --token eyJhIjoiM2U1Yzg1NWExOWE3MGE3N2YwMzY1ZWNjZDVlMzlhOTgiLCJ0IjoiYTY4OTdmMWQtYjFhOC00MjExLWIxZTQtZmJmOTA3YmRmMGZmIiwicyI6Ik5qUXdNalZrWTJJdFlUZzROQzAwTkRGa0xUZzFPVFV0T0RZek9Ea3lPV1F6WldaaSJ9 Step 3: Validate and Test the Tunnel\nCheck the logs of the Cloudflare Zero Trust Tunnel container to ensure that it started successfully: sudo docker logs cloudflare You should see logs indicating a successful connection to Cloudflare.\nOpen a web browser and visit the URL provided by Cloudflare during the tunnel creation. If the tunnel is functioning correctly, you will see a success message indicating that your tunnel is working. Test accessing your private resources through the tunnel to ensure connectivity and proper functionality. Step 4: Run Cloudflared as a Daemon Service (optional) If you want to run Cloudflare Zero Trust Tunnel as a daemon service, you can use Docker’s daemon mode and enable automatic restart. Example:\nsudo docker run -d --name cloudflare --restart unless-stopped --network host cloudflare/cloudflared:latest tunnel --no-autoupdate run --token eyJhIjoiM2U1Yzg1NWExOWE3MGE3N2YwMzY1ZWNjZDVlMzlh ","wordCount":"334","inLanguage":"en","image":"http://localhost:1313/logo_outlined_6.png","datePublished":"2023-05-23T09:42:15-07:00","dateModified":"2023-05-23T09:42:15-07:00","author":{"@type":"Person","name":"subzero"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/installing-cloudflare-zero-trust-with-docker/"},"publisher":{"@type":"Organization","name":"subzero","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="subzero (Alt + H)"><img src=http://localhost:1313/logo_filled_outlined_6.png alt aria-label=logo height=35>subzero</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/about/ title=About><span>About</span></a></li><li><a href=http://localhost:1313/projects/ title=Projects><span>Projects</span></a></li><li><a href=http://localhost:1313/teaching/ title=Teaching><span>Teaching</span></a></li><li><a href=http://localhost:1313/search/ title=Search><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Installing Cloudflare Zero Trust With Docker</h1><div class=post-meta><span title='2023-05-23 09:42:15 -0700 PDT'>May 23, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;subzero</div></header><div class=post-content><p>Introduction:
Cloudflare Zero Trust Tunnel is a secure solution that enables you to connect your private infrastructure to Cloudflare&rsquo;s network without exposing it to the public internet. This manual will guide you through the installation process of Cloudflare Zero Trust Tunnel using Docker with host network mode and a Cloudflare Token for authentication.</p><p>Step 1: Log in to Cloudflare and Create a Tunnel Configuration</p><ul><li>Open a web browser and navigate to the Cloudflare website.</li><li>Log in to your Cloudflare account.</li><li>Go to the &ldquo;Zero Trust&rdquo; section in the Cloudflare dashboard.</li><li>Click on &ldquo;Tunnels&rdquo; and then &ldquo;Create Tunnel Configuration.&rdquo;</li><li>Provide a name for your configuration, select the data centers you want to use, and configure other settings as per your requirements.</li><li>Save the configuration.</li></ul><p>Step 2: Start the Tunnel Container with Docker</p><ul><li>Open a terminal or command prompt.</li><li>Run the following command to start the Cloudflare Zero Trust Tunnel container using host network mode and the Cloudflare Token:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo docker run -d --name cloudflare --restart unless-stopped --network host cloudflare/cloudflared:latest tunnel --no-autoupdate run --token &lt;cloudflare_token&gt;
</span></span></code></pre></div><p>Replace &lt;cloudflare_token> with the Cloudflare Token you generated in Step 1.
Example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo docker run -d --name cloudflare --restart unless-stopped --network host cloudflare/cloudflared:latest tunnel --no-autoupdate run --token eyJhIjoiM2U1Yzg1NWExOWE3MGE3N2YwMzY1ZWNjZDVlMzlhOTgiLCJ0IjoiYTY4OTdmMWQtYjFhOC00MjExLWIxZTQtZmJmOTA3YmRmMGZmIiwicyI6Ik5qUXdNalZrWTJJdFlUZzROQzAwTkRGa0xUZzFPVFV0T0RZek9Ea3lPV1F6WldaaSJ9
</span></span></code></pre></div><p>Step 3: Validate and Test the Tunnel</p><ul><li>Check the logs of the Cloudflare Zero Trust Tunnel container to ensure that it started successfully:</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo docker logs cloudflare
</span></span></code></pre></div><p>You should see logs indicating a successful connection to Cloudflare.</p><ul><li>Open a web browser and visit the URL provided by Cloudflare during the tunnel creation.</li><li>If the tunnel is functioning correctly, you will see a success message indicating that your tunnel is working.</li><li>Test accessing your private resources through the tunnel to ensure connectivity and proper functionality.</li></ul><p>Step 4: Run Cloudflared as a Daemon Service (optional)
If you want to run Cloudflare Zero Trust Tunnel as a daemon service, you can use Docker&rsquo;s daemon mode and enable automatic restart.
Example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo docker run -d --name cloudflare --restart unless-stopped --network host cloudflare/cloudflared:latest tunnel --no-autoupdate run --token eyJhIjoiM2U1Yzg1NWExOWE3MGE3N2YwMzY1ZWNjZDVlMzlh
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/ubuntu/>Ubuntu</a></li></ul><nav class=paginav><a class=next href=http://localhost:1313/posts/2024/install-jellyfin-with-docker-compose/><span class=title>Next »</span><br><span>Install Jellyfin With Docker Compose</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>subzero</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>